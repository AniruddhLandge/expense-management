{"ast":null,"code":"// import React, { useEffect, useState } from \"react\";\n// import axios from \"axios\";\n// import { useNavigate } from \"react-router-dom\";\n// import { buildWhatsAppShareUrl } from \"../utils/share\";\n\n// const Dashboard = () => {\n//   const [user, setUser] = useState(null);\n//   const [expenses, setExpenses] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   const navigate = useNavigate();\n\n//   const token = localStorage.getItem(\"token\");\n\n//   useEffect(() => {\n//     if (!token) {\n//       navigate(\"/login\");\n//       return;\n//     }\n\n//     const storedUser = JSON.parse(localStorage.getItem(\"user\"));\n//     setUser(storedUser);\n\n//     const fetchExpenses = async () => {\n//       try {\n//         const res = await axios.get(\"http://localhost:5000/api/expenses\", {\n//           headers: { Authorization: `Bearer ${token}` },\n//         });\n//         setExpenses(res.data);\n//       } catch (err) {\n//         console.error(\"Failed to fetch expenses:\", err);\n//       } finally {\n//         setLoading(false);\n//       }\n//     };\n\n//     fetchExpenses();\n//   }, [token, navigate]);\n\n//   const handleLogout = () => {\n//     localStorage.removeItem(\"token\");\n//     localStorage.removeItem(\"user\");\n//     navigate(\"/login\");\n//   };\n\n//   if (loading) {\n//     return <p className=\"text-center mt-10\">Loading dashboard...</p>;\n//   }\n//    const currentMonth = new Date().getMonth();\n//   const totalSpent = expenses\n//     .filter((exp) => new Date(exp.date).getMonth() === currentMonth)\n//     .reduce((acc, exp) => acc + exp.amount, 0);\n\n//   if (loading) {\n//     return <p className=\"text-center mt-10\">Loading dashboard...</p>;\n//   }\n\n//   return (\n//     <div className=\"p-6\">\n//       <div className=\"flex justify-between items-center\">\n//         <h1 className=\"text-2xl font-bold\">Dashboard</h1>\n//         {/* Logout button */}\n//         {/* <button\n//           onClick={handleLogout}\n//           className=\"px-4 py-2 bg-red-500 text-white rounded-md\"\n//         >\n//           Logout\n//         </button> */}\n//       </div>\n\n//       {user && (\n//         <div className=\"mt-4\">\n//           <h2 className=\"text-xl font-semibold\">Welcome, {user.name}</h2>\n//           {/* <p>Email: {user.email}</p> */}\n// <p className=\"text-center text-2xl font-bold text-primary mt-4 p-3 rounded-lg shadow-md\">\n//   Monthly Limit: â‚¹{user.monthlyLimit || 0}\n// </p>\n\n//         </div>\n//       )}\n\n// {/* âœ… Progress Bar Section */}\n//     {/* âœ… Progress Bar Section */}\n// {user && user.monthlyLimit > 0 && (\n//   <div className=\"mt-8\">\n//     <h2 className=\"text-xl font-semibold mb-2 text-center\">\n//       Monthly Expense Progress\n//     </h2>\n\n//     {(() => {\n//       let progressPercent =\n//         user.monthlyLimit > 0\n//           ? Math.min((totalSpent / user.monthlyLimit) * 100, 100)\n//           : 0;\n\n//       let progressColor = \"bg-green-500\"; // default\n//       if (progressPercent > 80) {\n//         progressColor = \"bg-red-500\"; // ðŸ”´ limit se 80% se upar\n//       } else if (progressPercent > 50) {\n//         progressColor = \"bg-orange-500\"; // ðŸŸ  50-80% beech me\n//       }\n\n//       return (\n//         <>\n//           <div className=\"w-full bg-gray-200 rounded-full h-6\">\n//             <div\n//               className={`h-6 rounded-full ${progressColor}`}\n//               style={{ width: `${progressPercent}%` }}\n//             ></div>\n//           </div>\n//           <p className=\"text-center mt-2 text-lg font-bold text-primary\">\n//             Spent â‚¹{totalSpent} / â‚¹{user.monthlyLimit}\n//           </p>\n//         </>\n//       );\n//     })()}\n//   </div>\n// )}\n\n//       <div className=\"mt-6\">\n//         <h2 className=\"text-xl font-semibold mb-2\">Your Expenses</h2>\n//         {expenses.length === 0 ? (\n//           <p>No expenses found!</p>\n//         ) : (\n//           <table className=\"w-full border-collapse border border-gray-300\">\n//             <thead>\n//               <tr className=\"bg-gray-800 text-primary\">\n//                 <th className=\"border border-gray-300 px-4 py-2\">Title</th>\n//                 <th className=\"border border-gray-300 px-4 py-2\">Amount</th>\n//                 <th className=\"border border-gray-300 px-4 py-2\">Category</th>\n//                 <th className=\"border border-gray-300 px-4 py-2\">Date</th>\n//                 <th className=\"border border-gray-300 px-4 py-2\">Share</th>\n//               </tr>\n//             </thead>\n//             <tbody>\n//               {expenses.filter((exp) => {\n//       // Sirf 1 mahine ke andar ke\n//       const expDate = new Date(exp.date);\n//       const now = new Date();\n//       return (\n//         expDate.getMonth() === now.getMonth() &&\n//         expDate.getFullYear() === now.getFullYear()\n//       );\n//     })\n//     .slice(-10)\n//     .map((exp) => (\n//                 <tr key={exp.id}>\n//                   <td className=\"border border-gray-300 px-4 py-2\">\n//                     {exp.title}\n//                   </td>\n//                   <td className=\"border border-gray-300 px-4 py-2\">\n//                     â‚¹{exp.amount}\n//                   </td>\n//                   <td className=\"border border-gray-300 px-4 py-2\">\n//                     {exp.category}\n//                   </td>\n//                   <td className=\"border border-gray-300 px-4 py-2\">\n//                     {exp.date}\n//                   </td>\n//                   <td className=\"border border-gray-300 px-4 py-2 text-center\">\n//                     <a\n//                       href={buildWhatsAppShareUrl(exp)}\n//                       target=\"_blank\"\n//                       rel=\"noopener noreferrer\"\n//                       className=\"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600\"\n//                     >\n//                       Share\n//                     </a>\n//                   </td>\n//                 </tr>\n//               ))}\n//             </tbody>\n//           </table>\n//         )}\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default Dashboard;","map":{"version":3,"names":[],"sources":["C:/xampp/htdocs/expense-tracker-ai/client/src/pages/Dashboard.jsx"],"sourcesContent":["// import React, { useEffect, useState } from \"react\";\r\n// import axios from \"axios\";\r\n// import { useNavigate } from \"react-router-dom\";\r\n// import { buildWhatsAppShareUrl } from \"../utils/share\";\r\n\r\n// const Dashboard = () => {\r\n//   const [user, setUser] = useState(null);\r\n//   const [expenses, setExpenses] = useState([]);\r\n//   const [loading, setLoading] = useState(true);\r\n//   const navigate = useNavigate();\r\n\r\n//   const token = localStorage.getItem(\"token\");\r\n\r\n//   useEffect(() => {\r\n//     if (!token) {\r\n//       navigate(\"/login\");\r\n//       return;\r\n//     }\r\n\r\n//     const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n//     setUser(storedUser);\r\n\r\n//     const fetchExpenses = async () => {\r\n//       try {\r\n//         const res = await axios.get(\"http://localhost:5000/api/expenses\", {\r\n//           headers: { Authorization: `Bearer ${token}` },\r\n//         });\r\n//         setExpenses(res.data);\r\n//       } catch (err) {\r\n//         console.error(\"Failed to fetch expenses:\", err);\r\n//       } finally {\r\n//         setLoading(false);\r\n//       }\r\n//     };\r\n\r\n//     fetchExpenses();\r\n//   }, [token, navigate]);\r\n\r\n//   const handleLogout = () => {\r\n//     localStorage.removeItem(\"token\");\r\n//     localStorage.removeItem(\"user\");\r\n//     navigate(\"/login\");\r\n//   };\r\n\r\n//   if (loading) {\r\n//     return <p className=\"text-center mt-10\">Loading dashboard...</p>;\r\n//   }\r\n//    const currentMonth = new Date().getMonth();\r\n//   const totalSpent = expenses\r\n//     .filter((exp) => new Date(exp.date).getMonth() === currentMonth)\r\n//     .reduce((acc, exp) => acc + exp.amount, 0);\r\n\r\n//   if (loading) {\r\n//     return <p className=\"text-center mt-10\">Loading dashboard...</p>;\r\n//   }\r\n\r\n  \r\n//   return (\r\n//     <div className=\"p-6\">\r\n//       <div className=\"flex justify-between items-center\">\r\n//         <h1 className=\"text-2xl font-bold\">Dashboard</h1>\r\n//         {/* Logout button */}\r\n//         {/* <button\r\n//           onClick={handleLogout}\r\n//           className=\"px-4 py-2 bg-red-500 text-white rounded-md\"\r\n//         >\r\n//           Logout\r\n//         </button> */}\r\n//       </div>\r\n\r\n//       {user && (\r\n//         <div className=\"mt-4\">\r\n//           <h2 className=\"text-xl font-semibold\">Welcome, {user.name}</h2>\r\n//           {/* <p>Email: {user.email}</p> */}\r\n// <p className=\"text-center text-2xl font-bold text-primary mt-4 p-3 rounded-lg shadow-md\">\r\n//   Monthly Limit: â‚¹{user.monthlyLimit || 0}\r\n// </p>\r\n          \r\n//         </div>\r\n//       )}\r\n\r\n// {/* âœ… Progress Bar Section */}\r\n//     {/* âœ… Progress Bar Section */}\r\n// {user && user.monthlyLimit > 0 && (\r\n//   <div className=\"mt-8\">\r\n//     <h2 className=\"text-xl font-semibold mb-2 text-center\">\r\n//       Monthly Expense Progress\r\n//     </h2>\r\n\r\n//     {(() => {\r\n//       let progressPercent =\r\n//         user.monthlyLimit > 0\r\n//           ? Math.min((totalSpent / user.monthlyLimit) * 100, 100)\r\n//           : 0;\r\n\r\n//       let progressColor = \"bg-green-500\"; // default\r\n//       if (progressPercent > 80) {\r\n//         progressColor = \"bg-red-500\"; // ðŸ”´ limit se 80% se upar\r\n//       } else if (progressPercent > 50) {\r\n//         progressColor = \"bg-orange-500\"; // ðŸŸ  50-80% beech me\r\n//       }\r\n\r\n//       return (\r\n//         <>\r\n//           <div className=\"w-full bg-gray-200 rounded-full h-6\">\r\n//             <div\r\n//               className={`h-6 rounded-full ${progressColor}`}\r\n//               style={{ width: `${progressPercent}%` }}\r\n//             ></div>\r\n//           </div>\r\n//           <p className=\"text-center mt-2 text-lg font-bold text-primary\">\r\n//             Spent â‚¹{totalSpent} / â‚¹{user.monthlyLimit}\r\n//           </p>\r\n//         </>\r\n//       );\r\n//     })()}\r\n//   </div>\r\n// )}\r\n\r\n//       <div className=\"mt-6\">\r\n//         <h2 className=\"text-xl font-semibold mb-2\">Your Expenses</h2>\r\n//         {expenses.length === 0 ? (\r\n//           <p>No expenses found!</p>\r\n//         ) : (\r\n//           <table className=\"w-full border-collapse border border-gray-300\">\r\n//             <thead>\r\n//               <tr className=\"bg-gray-800 text-primary\">\r\n//                 <th className=\"border border-gray-300 px-4 py-2\">Title</th>\r\n//                 <th className=\"border border-gray-300 px-4 py-2\">Amount</th>\r\n//                 <th className=\"border border-gray-300 px-4 py-2\">Category</th>\r\n//                 <th className=\"border border-gray-300 px-4 py-2\">Date</th>\r\n//                 <th className=\"border border-gray-300 px-4 py-2\">Share</th>\r\n//               </tr>\r\n//             </thead>\r\n//             <tbody>\r\n//               {expenses.filter((exp) => {\r\n//       // Sirf 1 mahine ke andar ke\r\n//       const expDate = new Date(exp.date);\r\n//       const now = new Date();\r\n//       return (\r\n//         expDate.getMonth() === now.getMonth() &&\r\n//         expDate.getFullYear() === now.getFullYear()\r\n//       );\r\n//     })\r\n//     .slice(-10)\r\n//     .map((exp) => (\r\n//                 <tr key={exp.id}>\r\n//                   <td className=\"border border-gray-300 px-4 py-2\">\r\n//                     {exp.title}\r\n//                   </td>\r\n//                   <td className=\"border border-gray-300 px-4 py-2\">\r\n//                     â‚¹{exp.amount}\r\n//                   </td>\r\n//                   <td className=\"border border-gray-300 px-4 py-2\">\r\n//                     {exp.category}\r\n//                   </td>\r\n//                   <td className=\"border border-gray-300 px-4 py-2\">\r\n//                     {exp.date}\r\n//                   </td>\r\n//                   <td className=\"border border-gray-300 px-4 py-2 text-center\">\r\n//                     <a\r\n//                       href={buildWhatsAppShareUrl(exp)}\r\n//                       target=\"_blank\"\r\n//                       rel=\"noopener noreferrer\"\r\n//                       className=\"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600\"\r\n//                     >\r\n//                       Share\r\n//                     </a>\r\n//                   </td>\r\n//                 </tr>\r\n//               ))}\r\n//             </tbody>\r\n//           </table>\r\n//         )}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default Dashboard;\r\n\r\n\r\n\r\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}